@using Domain.Models.Enum
@model Core.ViewModels.TestHeaderVM
@{
    ViewData["Title"] = "ثبت تحلیل سند";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

@section Styles
{

    <!-- Sweet Alert Css -->
    <link href="~/Admin/plugins/sweetalert/sweetalert.css" rel="stylesheet" />
}

<div class="card">
    <div class="header bg-blue-grey">
        <h2>
            ثبت تحلیل سند
        </h2>
    </div>
    <div class="body">
        <div id="wizard_vertical">
            <h2>ثبت اطلاعات اولیه </h2>
            <section>

                <div class="row clearfix">
                    <div class="col-sm-4">
                        <div class="form-group">
                            <div class="form-line">
                                <label asp-for="TestType" class="control-label"></label>
                                <select id="Gender" class="form-control show-tick" asp-for="TestType" asp-items="Html.GetEnumSelectList<TestType>()">
                                    <option value="">--انتخاب نمایید--</option>
                                </select>
                                <span asp-validation-for="TestType" class="text-danger"></span>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group">
                            <div class="form-line">
                                <label asp-for="TitleId" class="control-label"></label>
                                <select id="Title" class="form-control show-tick" asp-for="TitleId" asp-items="@(ViewBag.TestTitle)">
                                    <option value="">--انتخاب نمایید--</option>
                                </select>
                                <span asp-validation-for="TitleId" class="text-danger"></span>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group">
                            <div class="form-line">
                                <label asp-for="ProjectId" class="control-label"></label>
                                <select id="Project" class="form-control show-tick" asp-for="ProjectId" asp-items="@(ViewBag.Projects)">
                                    <option value="">--انتخاب نمایید--</option>
                                </select>
                                <span asp-validation-for="ProjectId" class="text-danger"></span>
                            </div>
                        </div>
                    </div>

                </div>

            </section>

            <h2>ثبت اطلاعات تکمیلی</h2>
            <section>

                @for (int i = 0; i < Model.DocReviewList.Count; i++)
                {
                    @Html.Hidden("Model.DocReviewList[" + i + "].DocReviewTitle", Model.DocReviewList[i].DocReviewTitle)
                    <div class="row clearfix">

                        <div class="col-sm-2">
                            <div class="form-group">
                                <div class="form-line">
                                    <label class="control-label">
                                        @Model.DocReviewList[i].DocReviewTitle.ToDescription()
                                    </label>
                                </div>
                            </div>
                        </div>
                        @foreach (DocReviewAnswer Answersub in Enum.GetValues(typeof(DocReviewAnswer)))
                        {
                            <div class="col-sm-2">
                                @Html.RadioButtonFor(m => m.DocReviewList[i].DocReviewAnswer, (int)Answersub)
                                <label class="control-label">@Answersub.ToDescription()</label>
                            </div>
                        }

                    </div>
                    <div class="row clearfix">
                        <div class="col-sm-10">
                            <div class="form-group">
                                <div class="form-line">
                                    <label asp-for="DocReviewList[i].Description" class="control-label"></label>
                                    <input asp-for="DocReviewList[i].Description" class="form-control" />
                                </div>
                            </div>
                        </div>
                    </div>

                }

            </section>
        </div>

    </div>
</div>

@section Scripts
{
    <script>
        $(document).ready(function () {
            $('#wizard_vertical').steps({
                headerTag: 'h2',
                bodyTag: 'section',
                transitionEffect: 'slideLeft',
                stepsOrientation: 'vertical',
                onInit: function (event, currentIndex) {
                    setButtonWavesEffect(event);
                },
                onStepChanged: function (event, currentIndex, priorIndex) {
                    setButtonWavesEffect(event);
                },
                onStepChanging: function (event, currentIndex, newIndex) {
                    //if (currentIndex > newIndex) { return true; }

                    //if (currentIndex < newIndex) {
                    //    form.find('.body:eq(' + newIndex + ') label.error').remove();
                    //    form.find('.body:eq(' + newIndex + ') .error').removeClass('error');
                    //}

                    //form.validate().settings.ignore = ':disabled,:hidden';
                    //return form.valid();
                    return true;
                },
                onFinished: function (event, currentIndex) {
                    alert("Good job!");
                }

            });


            function setButtonWavesEffect(event) {
                $(event.currentTarget).find('[role="menu"] li a').removeClass('waves-effect');
                $(event.currentTarget).find('[role="menu"] li:not(.disabled) a').addClass('waves-effect');
            }


        });
    </script>
    <!-- JQuery Steps Plugin Js -->
    <script src="~/Admin/plugins/jquery-steps/jquery.steps.js"></script>
}
